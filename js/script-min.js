var openFeedback=document.querySelector(".open-feedback"),feedback=document.querySelector(".popup-feedback"),openBigmap=document.querySelector(".open-bigmap"),bigmap=document.querySelector(".popup-bigmap"),openBuyAlert=document.querySelector(".open-buy-alert"),buyAlert=document.querySelector(".popup-buy-alert");if(feedback){var closeFeedback=feedback.querySelector(".popup-close"),form=feedback.querySelector("form"),username=feedback.querySelector("[name=username]"),email=feedback.querySelector("[name=email]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("username")}catch(e){isStorageSupport=!1}openFeedback.addEventListener("click",function(e){e.preventDefault(),feedback.classList.add("popup-show"),storage?(username.value=storage,email.focus()):username.focus()}),closeFeedback.addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("popup-show"),feedback.classList.remove("popup-error")}),form.addEventListener("submit",function(e){name.value&&email.value?isStorageSupport&&localStorage.setItem("name",name.value):(e.preventDefault(),feedback.classList.add("popup-error"),console.log("Нужно указать имя и e-mail"))})}if(buyAlert){var closeBuyAlert=buyAlert.querySelector(".popup-close");openBuyAlert.addEventListener("click",function(e){e.preventDefault(),buyAlert.classList.add("popup-show")}),closeBuyAlert.addEventListener("click",function(e){e.preventDefault(),buyAlert.classList.remove("popup-show"),buyAlert.classList.remove("popup-error")})}if(bigmap){var closeBigmap=bigmap.querySelector(".popup-close");openBigmap.addEventListener("click",function(e){e.preventDefault(),bigmap.classList.add("popup-show")}),closeBigmap.addEventListener("click",function(e){e.preventDefault(),bigmap.classList.remove("popup-show")})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedback.classList.contains("popup-show")&&(feedback.classList.remove("popup-show"),feedback.classList.remove("popup-error")),bigmap.classList.contains("popup-show")&&bigmap.classList.remove("popup-show"))});
